/*
 * wallaby-vscode - v1.0.106
 * http://wallabyjs.com
 * Copyright (c) 2014-2019 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of wallaby-vscode and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */

!function s(r,l,c){process.env.WALLABY_PRODUCTION=!0;var u="function"==typeof require&&require;module.exports=function n(a,e){if(!l[a]){if(!r[a]){var t="function"==typeof require&&require;if(!e&&t)return t(a,!0);if(u)return u(a,!0);var i=new Error("Cannot find module '"+a+"'");throw i.code="MODULE_NOT_FOUND",i}var o=l[a]={exports:{}};r[a][0].call(o.exports,function(e){var t=r[a][1][e];return n(t||e)},o,o.exports,s,r,l,c)}return l[a].exports}(c[0])}({1:[function(r,e,t){"use strict";var n=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var c=r("fs"),d=r("path"),a=r("os"),p=r("vscode"),i=r("./lib/compositeDisposable"),h=p.window,o=p.workspace,s=a.tmpdir(),f=/^win/.test(process.platform),_=/^darwin/.test(process.platform),m="2.1.1",l=r("./package.json").version,v=void 0,g=void 0,y="https",b=void 0,u=function(){function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u)}return n(u,[{key:"activate",value:function(o){var s=this;s._disposables=new i,s._disposables.add(function(){delete s._failedUpdateCount,clearTimeout(s._updateChecker)}),setImmediate(function(){v=r("q"),g=r("lockfile");try{p.workspace.getConfiguration()&&(p.workspace.getConfiguration().get("wallaby.useHttpForDownload",!1)&&(y="http"),p.workspace.getConfiguration().get("wallaby.strictSSL",!0)||(b=!1))}catch(e){}s._baseUrl=y+"://update.wallabyjs.com/",s._versionFile=d.join(__dirname,"wallaby.json"),s._updateLockFile=d.join(__dirname,"update.lock"),s._updateLockOpts={stale:6e5},s._corePackage=d.join(__dirname,"..","wallaby","package.json"),s._coreFolder=d.dirname(s._corePackage),s._phantomFolder=d.join(o.extensionPath,"..","..","phantomjs_v"+m),s._phantomBinary=d.join(s._phantomFolder,"phantomjs"+(f?".exe":"")),s._lkp=d.join(a.homedir(),".wallaby","key.lic"),s._oldlkp=d.join(c.realpathSync(o.extensionPath),"..",".wlck"),!c.existsSync(s._lkp)&&c.existsSync(s._oldlkp)&&(s._lkp=s._oldlkp),(u._isDebugMode()||u._noAutomaticInstallMode())&&(u._download=function(){throw new Error("Can not delete/download/extract in this mode")}),s._setupStatusIndicator(),s._updateIfRequired(!0,void 0,u._expiryDate(s._lkp)).then(function(e){var t=e[1],n=r("../wallaby/client"),a={context:o,coreClient:n,statusBar:s._statusBar,phantomPath:s._phantomBinary,onFirstStart:function(){clearTimeout(s._updateChecker),s._updateChecker=setTimeout(function(){return s._performUpdate(a)},6e5)},licenseChanged:function(){clearTimeout(s._updateChecker),s._performUpdate(a)},updateAvailable:function(){},debug:u._isDebugMode(),licensed:!1,isMac:_,firstInstall:t,deactivate:function(){return s.deactivate()},version:u._getVersion()},i=r("./lib/controller");s._controller=new i(a),s._controller.activate(),s._disposables.add(function(){return s._controller.deactivate()}),console.log("[Wallaby Console] VS Code extension v"+l),console.log("[Wallaby Console] Core v"+u._requireNoCache(s._corePackage).version)}).fail(function(e){return u._notifyError(e.message)}).finally(function(){return s._hideStatusIndicator()})})}},{key:"_performUpdate",value:function(n){var a=this;return a._updateIfRequired(!1,n.licensed,u._expiryDate(a._lkp)).then(function(e){var t=e[0];t&&(global._wallabyNewCore=t),t&&n.updateAvailable(function(t){t=t||function(){};try{var e=[],n=global._wallabyNewCore;delete global._wallabyNewCore,n&&c.existsSync(n)&&(a._suppressUpdateNotifications||h.showInformationMessage("Updating wallaby.js core. It may take a few seconds, you will be notified once the update is finished."),e.push(u._extract(n,a._coreFolder))),v.all(e).then(function(){global._wallabyHasJustUpdated=!0,delete a._failedUpdateCount,a._suppressUpdateNotifications||h.showInformationMessage("Wallaby.js core has been successfully updated to v"+u._requireNoCache(a._corePackage).version+".")}).fail(function(e){return u._notifyError(e.message)}).then(function(){return t()})}catch(e){t()}})}).fail(function(e){a._failedUpdateCount=a._failedUpdateCount?a._failedUpdateCount+1:1,console.error(e)}).finally(function(){a._failedUpdateCount&&3<a._failedUpdateCount||(a._updateChecker=setTimeout(function(){return a._performUpdate(n)},6e5))})}},{key:"_updateIfRequired",value:function(r,t,n){var l=this,a=global._wallabyHasJustUpdated,c=l._baseUrl;delete global._wallabyHasJustUpdated;var i=function(e){return u._download({name:"version",from:e+"wallaby.json?licensed="+(t?"true":"false")+(n?"&expiry="+n.replace(/\//g,"-"):""),to:l._versionFile})};return v.all([a?v.when({}):u._stat(l._corePackage),a?v.when({}):u._stat(l._phantomBinary)]).then(function(e){var t=e[0],n=e[1];return v.all([t,n,u._isDebugMode()||u._noAutomaticInstallMode()||a||r&&t&&n?v.when({core:t&&u._requireNoCache(l._corePackage).version||"unknown"}):(l._statusUpdater("Downloading wallaby.js version file"),i(l._baseUrl).fail(function(){return c=y+"://s3.amazonaws.com/wallaby-downloads/",i("http://update.wallabyjs.com/")}).then(function(){return l._version()}))])}).then(function(e){var t=e[0],n=e[1],a=e[2],i=[v.when(!1),v.when(!1)];if(g.checkSync(l._updateLockFile,l._updateLockOpts))return v.all(i);var o=!0,s=!1;if(u._noAutomaticInstallMode()&&(!t||!n))throw new Error("With wallaby.noAutomaticInstall option set, you need to manually install wallaby core and dependencies when the extension is installed/updated.");return t&&u._requireNoCache(l._corePackage).version===a.core||(i[0]=u._download({name:"core",from:c+"wallaby-v"+a.core+".zip",to:l._coreFolder,unzip:r}).fail(function(){return u._download({name:"core",from:y+"://s3.amazonaws.com/wallaby-downloads/wallaby-v"+a.core+".zip",to:l._coreFolder,unzip:r})}),l._statusUpdater("Downloading and extracting wallaby.js core"),o=!1),n||(i[1]=u._download({name:"phantom.js",from:y+"://s3.amazonaws.com/wallaby-downloads/phantom/phantomjs-"+m+"-"+(f?"windows.zip":_?"macosx.zip":"linux-"+("x64"===process.arch?"x86_64.tar.bz2":"i686.tar.bz2")),to:l._phantomFolder,makeExecutable:!f,entryName:d.basename(l._phantomBinary),unzip:r}),l._statusUpdater("Downloading and extracting wallaby.js dependencies"),s=!(o=!1)),o||g.lockSync(l._updateLockFile,l._updateLockOpts),r&&!o&&(s?h.showInformationMessage("Installing wallaby.js dependencies. It may take a minute or two, you will be notified once the install is finished."):l._suppressUpdateNotifications||h.showInformationMessage("Updating wallaby.js core. It may take a few seconds, you will be notified once the update is finished.")),v.all(i).then(function(e){return o||g.unlockSync(l._updateLockFile),r&&!o&&(s?h.showInformationMessage("Wallaby.js dependencies and core v"+a.core+" have been successfully installed."):l._suppressUpdateNotifications||h.showInformationMessage("Wallaby.js core v"+a.core+" has been successfully installed.")),v.when(e)})})}},{key:"_version",value:function(){var e=u._requireNoCache(this._versionFile),t=void 0;return e.latestServer.forEach(function(e){e.substring(0,e.lastIndexOf("."))===l.substring(0,e.lastIndexOf("."))&&(t=e)}),{core:t}}},{key:"_setupStatusIndicator",value:function(){var n=this;n._statusBar=h.createStatusBarItem(p.StatusBarAlignment.Right,Number.NEGATIVE_INFINITY),n._statusBar.show();var e=n._statusBar.hide.bind(n._statusBar),t=n._statusBar.dispose.bind(n._statusBar);n._statusBar.hide=function(){n._statusBar.stopProgress(),e()},n._statusBar.dispose=function(){n._statusBar.stopProgress(),t()},n._statusBar.displayProgress=function(){var e=0,t=["[=--------]","[-=-------]","[--=------]","[---=-----]","[----=----]","[-----=---]","[------=--]","[-------=-]","[--------=]","[-------=-]","[------=--]","[-----=---]","[----=----]","[---=-----]","[--=------]","[-=-------]"];clearInterval(n._statusBar._progress),n._statusBar._progress=setInterval(function(){n._statusBar.setMainText(t[e=++e%t.length]+"   "),n._statusBar._doUpdateText()},150)},n._statusBar.setMainText=function(e){n._statusBar._mainText=e},n._statusBar.setExtensionText=function(e){n._statusBar._extensionText=e},n._statusBar.updateText=function(){return n._statusBar._doUpdateText()},n._statusBar._doUpdateText=function(){n._statusBar.text=(n._statusBar._extensionText||"")+"   "+(n._statusBar._mainText||"")},n._statusBar.stopProgress=function(){clearInterval(n._statusBar._progress),delete n._statusBar._progress},n._statusBar.displayProgress(),n._statusUpdater=function(e){n._statusBar.tooltip=e},n._disposables.add(function(){n._removeStatusIndicator()})}},{key:"_hideStatusIndicator",value:function(){this._statusBar&&(this._statusBar.text="",this._statusBar.tooltip="",this._statusBar.hide()),this._statusUpdater=function(){}}},{key:"_removeStatusIndicator",value:function(){this._statusBar&&this._statusBar.dispose(),this._statusUpdater=function(){}}},{key:"deactivate",value:function(){this._disposed||(this._disposables.dispose(),this._disposed=!0)}},{key:"suppressUpdateNotifications",value:function(){this._suppressUpdateNotifications=!0}}],[{key:"_isDebugMode",value:function(){return o.getConfiguration()&&o.getConfiguration().get("wallaby.debug",!1)}},{key:"_noAutomaticInstallMode",value:function(){return o.getConfiguration()&&o.getConfiguration().get("wallaby.noAutomaticInstall",!1)}},{key:"_requireNoCache",value:function(e){return delete originalRequire.cache[originalRequire.resolve(e)],originalRequire(e)}},{key:"_stat",value:function(e){return v.nfcall(c.stat,e).fail(function(){return!1})}},{key:"_remove",value:function(t,n,a){return(n?v.nfcall(r("fs-extra").remove,t):v.nfcall(c.unlink,t)).fail(function(e){if(a)throw e;return u._remove(t,n,!0)})}},{key:"_download",value:function(o){return v.promise(function(e,t){var n=r("request"),a=d.extname(o.from),i=".zip"===a||".bz2"===a?d.join(s,d.basename(o.to)+a):o.to;try{n({url:o.from,headers:{"User-Agent":"VS Code "+p.version},strictSSL:b}).on("error",function(e){return t(new Error("Error while downloading wallaby.js "+o.name+" file: "+e.message))}).pipe(c.createWriteStream(i)).on("error",function(e){return t(new Error("Error while saving wallaby.js "+o.name+" file: "+e.message))}).on("close",function(){o.unzip?u._extract(i,o.to,o.entryName,o.makeExecutable).then(function(){return e(i)}).fail(function(e){return t(new Error("Error while unzipping wallaby.js "+o.name+" file: "+e.message))}):e(i)})}catch(e){t(e)}})}},{key:"_extract",value:function(i,o,s,e){return u._remove(o,!0).then(function(){try{if(~i.indexOf(".bz2"))return v.nfcall(r("fs-extra").ensureDir,o).then(function(){return v.promise(function(e,a){try{var t=r("unbzip2-stream"),n=r("tar-stream").extract();c.createReadStream(i).pipe(t()).pipe(n).on("entry",function(e,t,n){try{"phantomjs"===d.basename(e.name)?(t.pipe(c.createWriteStream(d.join(o,s))).on("finish",n).on("error",a),t.resume()):n()}catch(e){a(e)}}).on("finish",e)}catch(e){a(e)}})});var e=new(r("adm-zip-mit"))(i);if(s){var t=e.getEntries().find(function(e){return!e.isDirectory&&e.name===s});if(!t)throw new Error("Can not find "+s+" in the archive");e.extractEntryTo(t.entryName,o,!1,!0)}else e.extractAllTo(o,!0)}catch(e){throw"string"==typeof e?new Error(e):e}return v.when(!0)}).then(function(){return e&&c.chmodSync(d.join(o,s),"0755"),v.when(!0)})}},{key:"_notifyError",value:function(e){h.showErrorMessage(e)}},{key:"_expiryDate",value:function(e){try{var t=r("fs").readFileSync(e).toString();if(t){var n=t.split(":");2===n.length&&(t=(a=n[1])&&a.replace(/^\s+|\s+$/gm,""))}return new Buffer(t,"base64").toString().split("\n")[2]}catch(e){}var a}},{key:"_getVersion",value:function(){var e=1,t=0;try{var n=p.version.split(".");e=parseInt(n[0],10),t=parseInt(n[1],10)}catch(e){}return{major:e,minor:t}}}]),u}();t.activate=function(a){var e=new u;a.subscriptions.push({dispose:function(){return e.deactivate()}});var t,n,i,o=u._getVersion();o.major<=1&&o.minor<18&&(t=process.exit,n=process.exit=function(){(function(){e.deactivate(),t.apply(process,arguments)}).apply(null,arguments)},process.on("SIGINT",function(){n.apply(null,arguments)}),process.on("SIGTERM",function(){n.apply(null,arguments)}),process.on("exit",function(){n.apply(null,arguments)}));try{if(l=p.workspace.getConfiguration()){var s=l.get("http.proxy","");s&&(process.env.http_proxy=s);var r=l.get("https.proxy","");r&&(process.env.https_proxy=r),l.get("wallaby.showUpdateNotifications",!0)||e.suppressUpdateNotifications()}}catch(e){}try{var l;(l=p.workspace.getConfiguration())&&(i=l.get("wallaby.colors",{}))&&Object.keys(i).forEach(function(t){try{if(!t)return;var e=a.asAbsolutePath(d.join("images",t+".svg"));if(!c.existsSync(e))return;var n=c.readFileSync(e).toString().replace(/fill:#.[^;]*/,"fill:"+i[t]);c.writeFileSync(e,n)}catch(e){console.error("Failed to set icon "+t+" type to "+i[t]+". "+e.message)}})}catch(e){}e.activate(a)}},{"./lib/compositeDisposable":3,"./lib/controller":4,"./package.json":8,"adm-zip-mit":void 0,fs:void 0,"fs-extra":void 0,lockfile:void 0,os:void 0,path:void 0,q:void 0,request:void 0,"tar-stream":void 0,"unbzip2-stream":void 0,vscode:void 0}],2:[function(n,e,t){"use strict";var a=n("vscode"),i=n("path");t.activate=function(e){var t=a.workspace.getConfiguration()&&a.workspace.getConfiguration().get("wallaby.debug",!1);return t&&(global.originalRequire=n),t||"dist"===i.basename(__dirname)?n("./extension").activate(e):(global.originalRequire=n)("./dist/index").activate(e)}},{"./extension":1,path:void 0,vscode:void 0}],3:[function(e,t,n){"use strict";var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disposables=[]}return a(e,[{key:"add",value:function(e){e.dispose?this._disposables.push(e):this._disposables.push({dispose:e})}},{key:"dispose",value:function(){this._disposables.forEach(function(e){return e.dispose()})}}]),e}();t.exports=i},{}],4:[function(n,e,t){"use strict";var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var f=n("path"),i=n("crypto"),m=n("fs-extra"),v=n("os"),g=n("vscode"),o=n("./compositeDisposable"),s=n("./screenshotContentProvider"),r=n("./testsOutputBuilder"),c=n("./valueExplorer"),u=g.workspace,y=g.window,d="wallaby.showCommandPalette",p=["start","stop","showCommandPalette","showLastScreenshot","showLicense","runProjectTests","runLineTests","runFileTests","updateProjectSnapshots","updateFileSnapshots","updateTestSnapshots","jumpToFailingTest","jumpToErrorSource","toggleUncovered","showLineTests","selectConfigFile","showFailingTests","showSideBySideDiff","openWallabyApp","showValue","copyExpressionPath","copyExpressionData","goToExpressionSource"],l=function(e){function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t,n){for(var a=!0;a;){var i=e,o=t,s=n;a=!1,null===i&&(i=Function.prototype);var r=Object.getOwnPropertyDescriptor(i,o);if(void 0!==r){if("value"in r)return r.value;var l=r.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=s,a=!0,r=c=void 0}}(Object.getPrototypeOf(l.prototype),"constructor",this).call(this);var i=this;this._state=e,this._context=e.context,this._phantomPath=e.phantomPath,this._statusBar=e.statusBar,this._Session=e.coreClient.Session,this._utils=e.coreClient.utils,this._isMac=e.isMac,this._firstInstall=e.firstInstall,this._deactivator=e.deactivate,this._lineAndColumnLinks=!1,e.updateAvailable=_.bind(this._updateAvailable,this),this._disposables=new o,_.each(p,function(t){return i._disposables.add(g.commands.registerCommand("wallaby."+t,function(e){return i[t](e)}))}),this._coverageDecorationTypes={1:this._createCoverageDecorationType("notCovered"),2:this._createCoverageDecorationType("covered"),3:this._createCoverageDecorationType("partiallyCovered"),4:this._createCoverageDecorationType("errorSource"),5:this._createCoverageDecorationType("errorPath")},this._outputDocumentSelector={language:"wallaby-output"},this._setupVersionSpecificComponents(e.version),this._uncoveredRegionDecorationType=y.createTextEditorDecorationType({backgroundColor:"#d2a032",color:"#ffffff"}),this._testsOutputChannel=y.createOutputChannel("Wallaby.js Tests"),this._consoleOutputChannel=y.createOutputChannel("Wallaby.js Console");var t=_.bind(i._absoluteFilePath,i);this._failingTestsOutput=new r(this._testsOutputChannel,t,e.coreClient.dmp,this._disposables,this._lineAndColumnLinks,!0,this._outputDocumentSelector,this._sideBySideDiffSupported),this._lineTestsOutput=new r(this._testsOutputChannel,t,e.coreClient.dmp,this._disposables,this._lineAndColumnLinks,void 0,this._outputDocumentSelector,this._sideBySideDiffSupported),g.workspace.registerTextDocumentContentProvider&&(i._screenshotProvider=new s(function(){return g.Uri.file(f.join(i._session.projectCachePath,"instrumented","screen.png"))}),i._disposables.add(g.workspace.registerTextDocumentContentProvider("wallaby-screenshot",i._screenshotProvider)),i._disposables.add(g.workspace.registerTextDocumentContentProvider("wallaby-diff",{provideTextDocumentContent:function(e){return new Buffer(e.query.toString(),"base64").toString()}}))),i._disposables.add(g.languages.registerHoverProvider(["javascript","javascriptreact","typescript","typescriptreact","coffeescript"],{provideHover:function(e,t){if(i._stats&&i._stats.errors)return new Promise(function(n){if(!i._session)return n();var a=t.line+1;i._session.requestError({file:i._getDocumentFilePath(e),line:a,type:"errorSource"},function(e){if(!e||!e.error||!e.error.expected&&!e.error.actual)return n();var t=i._failingTestsOutput.createDiffMarkdown(e.error.expected,e.error.actual,e.error.snapshot,a);return g.MarkdownString&&((t=new g.MarkdownString(t)).isTrusted=!0),n(new g.Hover(t))})})}})),this._valueExplorer=new c(this._context)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,EventEmitter),a(l,[{key:"_setupVersionSpecificComponents",value:function(e){var t=e.major,n=e.minor;1<=t&&2<=n&&g.workspace.registerTextDocumentContentProvider&&(this._sideBySideDiffSupported=!0),1<=t&&3<=n&&(this._hideAfterContentDecorationType=y.createTextEditorDecorationType({isWholeLine:!0,after:{margin:"0 0 0 -10000px"}})),1<=t&&5<=n&&(this._lineAndColumnLinks=!0),1<=t&&10<=n&&(l._escapeInlineMessage=function(e){return e}),1<=t&&11<=n&&(this._outputDocumentSelector.scheme="*"),1<=t&&16<=n&&(this._multiFolderWorkspaces=!0)}},{key:"_createCoverageDecorationType",value:function(e){return y.createTextEditorDecorationType({isWholeLine:!0,gutterIconPath:this._context.asAbsolutePath(f.join("images",e+".svg")).split("\\").join("/"),light:{after:{color:"errorSource"===e?"#c80000":"#0000ff"}},dark:{after:{color:"errorSource"===e?"#fe536a":"rgba(86, 156, 214, 1)"}}})}},{key:"activate",value:function(){var a=this,i=this;this._originalOnceDocumentStopsChanging=this._onceDocumentStopsChanging,this._onceDocumentStopsChanging=_.debounce(_.bind(this._originalOnceDocumentStopsChanging,this),100),l._outputTestResults=_.debounce(_.bind(l._outputTestResults,this),100),this._processOpenedEditors=_.debounce(_.bind(this._processOpenedEditors,this),100),i._statusBar.updateText=_.debounce(_.bind(i._statusBar.updateText,i._statusBar),200),this._executeCommand=_.bind(this._execute,this),this._packagePath=m.realpathSync(this._context.extensionPath),this._packageMetadata=n(f.join(this._packagePath,"package.json")),this._wallabyFolder=f.join(v.homedir(),".wallaby"),this._lkp=f.join(this._wallabyFolder,"key.lic");try{m.existsSync(this._wallabyFolder)||m.mkdirSync(this._wallabyFolder);var e=f.join(this._packagePath,"..",".wlck");if(!m.existsSync(this._lkp)&&m.existsSync(e)){var t=m.readFileSync(e).toString();m.writeFileSync(i._lkp,t),m.unlinkSync(e)}}catch(e){}i._commands=_.reduce(this._packageMetadata.contributes.commands,function(e,t){return t.command!==d&&(e[t.title.substr(12)]=t),e},{}),i._keyBindings=_.reduce(this._packageMetadata.contributes.keybindings,function(e,t){return e[t.command]=t,e},{}),i._firstInstall&&y.showInformationMessage("Start with displaying all wallaby.js commands using "+i._formatShortcut(i._keyBindings[d])+" shortcut."),this._statusBar.command="wallaby.showFailingTests",this._setActiveProjectRootAndConfig(),this._disposables.add(function(){i.stop(),i._statusBar&&i._statusBar.hide(),i._testsOutputChannel.dispose(),i._consoleOutputChannel.dispose(),_.each(i._coverageDecorationTypes,function(e){return e.dispose()}),i._uncoveredRegionDecorationType.dispose()}),this.on("stopped",function(){g.commands.executeCommand("setContext","wallaby.started",!1),i._removeStatus()}),this.on("projectConfigured",function(e){_.isNumber(e.editDelay)&&(i._onceDocumentStopsChanging=_.debounce(_.bind(i._originalOnceDocumentStopsChanging,i),e.editDelay))}),this.on("busy",function(){clearTimeout(i._statusUpdateTimeout),i._statusUpdateTimeout=setTimeout(function(){return i._updateStatus("progress")},300)}),this.on("notification",function(e){var t=[];if(!~e.text.indexOf("expire")||"warning"!==e.type||!a._suppressExpirationNotifications){~e.text.indexOf("activate-link")&&t.push({title:"Activate License",command:"wallaby.showLicense"}),~e.text.indexOf("continue-trial-link")&&t.push({title:"Continue Trial",command:"_continueTrial"}),~e.text.indexOf("purchase")&&t.push({title:"Purchase License",command:"_openPurchasePage"}),e.text=e.text.replace(/<br\/><br\/>/g," ").replace(/<br\/>/g," ").replace(/<[^>]*>/g,"");var n=[e.text].concat(t);y["show"+e.type.charAt(0).toUpperCase()+e.type.substr(1)+("info"===e.type?"rmation":"")+"Message"].apply(y,n).then(i._executeCommand),0===e.text.indexOf("Can not start node.js process")&&y.showInformationMessage('You may use the "wallaby.node" setting to configure the location of node.')}}),this.on("stats",function(e){e&&(i._stats=e,l._outputTestResults(i._failingTestsOutput,e)),i._updateStatus()}),this.on("filesToTrack",function(e,t){var n=a;_.reduce(t,function(e,t){return e[t]||(e[t]={changes:[],path:t}),e},e.filesToTrack),n._processOpenedEditors(e)}),this.on("live",function(e){g.commands.executeCommand("setContext","wallaby.started",!0),i._observeDocuments(e)}),this.on("documentUpdates",function(e,t){i._updateDocuments(e,t),i._displayStatusForActiveEditor(e),i._screenshotProvider&&i._screenshotProvider.update()}),this.on("fileMessages",function(e){g.commands.executeCommand("setContext","wallaby.reportedAtLeastOnceLogValue",!0),a._valueExplorer.update(e)}),this._multiFolderWorkspaces&&u.onDidChangeWorkspaceFolders&&this._disposables.add(u.onDidChangeWorkspaceFolders(function(){var e=a._activeConfig;a._setActiveProjectRootAndConfig(a._activeConfig),e!==a._activeConfig&&a.stop()}))}},{key:"_configFile",value:function(e){this._setActiveProjectRootAndConfig(e)}},{key:"_findProject",value:function(t){var n,e=this;if(t){if(this._multiFolderWorkspaces&&u.workspaceFolders){var a=_.find(u.workspaceFolders,function(e){return~t.indexOf(e.uri.fsPath+f.sep)});if(a)return a.uri.fsPath}else if(u.rootPath&&~t.indexOf(u.rootPath))return u.rootPath}else{if(!this._multiFolderWorkspaces||!u.workspaceFolders)return u.rootPath;var i=(n=e._context.workspaceState.get("wallaby:activeProjectRoot"))&&_.find(u.workspaceFolders,function(e){return n===e.uri.fsPath})?{v:n}:u.workspaceFolders.length?{v:u.workspaceFolders[0].uri.fsPath}:void 0;if("object"==typeof i)return i.v}}},{key:"_setActiveProjectRootAndConfig",value:function(e){e&&!m.existsSync(e)&&(e=void 0),this._activeProject=this._findProject(e)||void 0,e&&!this._activeProject&&(e=void 0,this._activeProject=this._findProject()),this._context.workspaceState.update("wallaby:activeProjectRoot",this._activeProject),this._activeProject?(e?this._activeConfig=e:(this._activeConfig=this._context.workspaceState.get("wallaby:configPath:"+l._hash(this._activeProjectRoot())),this._activeConfig&&!m.existsSync(this._activeConfig)&&delete this._activeConfig,this._activeConfig||(this._activeConfig=this._configByConvention())),this._context.workspaceState.update("wallaby:configPath:"+l._hash(this._activeProject),this._activeConfig),this._activeConfigFolder=this._activeConfig?f.dirname(this._activeConfig):void 0):(this._activeConfig=void 0,this._activeConfigFolder=void 0)}},{key:"_activeProjectRoot",value:function(){return this._activeProject}},{key:"_configPath",value:function(){return this._activeConfig}},{key:"_configFolderPath",value:function(){return this._activeConfigFolder}},{key:"deactivate",value:function(){this._disposed||(this._disposables.dispose(),this._disposed=!0)}},{key:"_forceDeactivate",value:function(){this._deactivator(),_.each(p,function(e){return g.commands.registerCommand("wallaby."+e,function(){return y.showWarningMessage("Wallaby.js trial session is over, please restart VS Code for a new trial session.")})})}},{key:"selectConfigFile",value:function(){var t=this,n=this._activeProjectRoot(),a=this._relativeConfigPath();u.findFiles("**/*wallaby*.*","**/node_modules/**",500).then(function(e){if(e&&e.length)return y.showQuickPick(_.map(e,function(e){return{label:t._relativeNormalizedFilePath(e.fsPath,t._activeProjectRoot()),path:e.fsPath}}),{placeHolder:n&&a?"Currently selected: "+f.join(f.basename(n),a):void 0}).then(function(e){e&&(t._configFile(e.path),t.start())});y.showWarningMessage('Can not find any file containing "wallaby" in its name.')})}},{key:"openWallabyApp",value:function(){try{var e=this._started?"http://localhost:51245":"https://wallabyjs.com/app/";n("openurl").open(e)}catch(e){}}},{key:"showFailingTests",value:function(){this._failingTestsOutput.show(),this._stats&&l._outputTestResults(this._failingTestsOutput,this._stats,!0)}},{key:"showCommandPalette",value:function(){var i=this;y.showQuickPick(_.map(i._commands,function(e,t){var n={label:t},a=i._keyBindings[e.command];return a&&(n.description=i._formatShortcut(a)),n})).then(function(e){return e&&g.commands.executeCommand(i._commands[e.label].command)})}},{key:"_formatShortcut",value:function(e){var n=this;if(e){var t=n._isMac?e.mac:e.key;return _.map(t.split(" "),function(e){return _.map(e.split("+"),function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);return n._isMac&&t.replace("Cmd","⌘").replace("Ctrl","⌃").replace("Alt","⌥").replace("Shift","⇧")||t}).join(n._isMac?"":"+")}).join(" ")}}},{key:"showLastScreenshot",value:function(){this._session&&this._screenshotProvider&&this._screenshotProvider.display()}},{key:"runLineTests",value:function(){this._runTests("line")}},{key:"runFileTests",value:function(){this._runTests("file")}},{key:"runProjectTests",value:function(){this._runTests("project")}},{key:"updateTestSnapshots",value:function(e){this._runTests("line",e)}},{key:"updateFileSnapshots",value:function(){this._runTests("file")}},{key:"updateProjectSnapshots",value:function(){this._runTests("project")}},{key:"jumpToFailingTest",value:function(){this._jumpTo("failingTest")}},{key:"jumpToErrorSource",value:function(){this._jumpTo("errorSource")}},{key:"showSideBySideDiff",value:function(){if(this._session){var e=y.activeTextEditor,t=e&&this._getDocumentFilePath(e.document),n=l._activeLine();this._session.requestError({file:t,line:n,type:"failingTest"},function(e){var t;e&&e.error&&(e.error.expected||e.error.actual)&&(t=g.commands).executeCommand.apply(t,["vscode.diff"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r.diffCommandArguments(e.error.expected,e.error.actual))))})}}},{key:"showLineTests",value:function(){var t=this;if(this._session){var e=y.activeTextEditor,n=e&&this._getDocumentFilePath(e.document),a=l._activeLine();n&&a&&this._session.openedDocuments[n]&&this._session.requestLineReport({file:n,line:a},function(e){t._lineTestsOutput.show(),l._outputTestResults(t._lineTestsOutput,e.report.tests&&e.report.tests.length?e.report:"Line is not covered or covered not by tests",!0)})}}},{key:"showValue",value:function(){var e=y.activeTextEditor;if(e){var t=this._session;if(t){var n=e.selection;if(n&&n.end){var a=this._getDocumentFilePath(e.document);if(a&&this._session.openedDocuments[a]){var i=e.document.offsetAt(n.end),o=e.document.getText();t.fileChangedInEditor(a,o.substring(0,i)+"/*?*/"+o.substr(i),void 0,!0)}}}}}},{key:"copyExpressionPath",value:function(e){e&&e.copyExpressionPath()}},{key:"copyExpressionData",value:function(e){e&&e.copyExpressionData()}},{key:"goToExpressionSource",value:function(e){e&&e.data()&&e.data().expressionLocation&&this._navigate(e.data().expressionLocation.file,e.data().expressionLocation.loc)}},{key:"start",value:function(){var e=this,n=this;if(this.stop(),this._updating)this._onUpdated=function(){return e.start()};else if(this._activeProjectRoot())if(this._configPath()){u.saveAll(!1),this._consoleOutputChannel.clear(),l._checkConfigurationSettings(),this._updateConfigurationFromSettings();var t=this._session=new n._Session;t.disposables=new o,t.filesToTrack=Object.create(null),t.openedDocuments=Object.create(null),t.projectCachePath=f.join(this._packagePath,"projects",l._hash(this._configPath())),t.start({localRoot:this._activeProjectRoot(),projectPath:t.projectCachePath,configPath:this._configPath(),phantomPath:this._phantomPath,client:"VSCode",lkp:this._lkp}),t.on("started",function(e){n._started=!0,delete n._starting,n._consoleOutputChannel.appendLine(r.markupText("message","[Info]")+" Started Wallaby.js Core v"+e.version),n.emit("started",e)}),t.on("stopped",function(e){n.stop(),e.deactivate&&n._forceDeactivate()}),t.on("expiredLicense",function(){delete n._state.onFirstStart}),t.on("notification",function(e){return n.emit("notification",e)}),t.on("busy",function(){n._state.onFirstStart&&(n._state.onFirstStart(),delete n._state.onFirstStart),n.emit("busy")}),t.on("stats",function(e){return n.emit("stats",e)}),t.on("fileMessages",function(e){return n.emit("fileMessages",e)}),t.on("projectConfigured",function(e){return n.emit("projectConfigured",e)}),t.on("filesToTrack",function(e){return n.emit("filesToTrack",t,e)}),t.on("live",function(e){return n.emit("live",t,e)}),t.on("documentUpdates",function(e){return n.emit("documentUpdates",t,e)}),t.on("navigationRequested",function(e){return n._navigate(e.file,e.loc)}),t.on("consoleError",function(e){return e&&_.each(e.split("\n"),function(e){return e&&n._consoleOutputChannel.appendLine(""+r.markupText("error","[Error] "+e))})}),t.on("consoleLog",function(e){return e&&_.each(e.split("\n"),function(e){return e&&n._consoleOutputChannel.appendLine(r.markupText("message","[Info]")+" "+e)})}),this._starting=!0,this.emit("starting"),n._updateStatus("progress"),this._valueExplorer.reset(this,t),t.disposables.add(function(){_.each(y.visibleTextEditors,function(t){_.each(n._coverageDecorationTypes,function(e){return t.setDecorations(e,[])}),n._hideAfterContentDecorationType&&t.setDecorations(n._hideAfterContentDecorationType,[]),n._destroyUncoveredDecorations(t)})})}else l._notifyHowToSelectConfig(this);else y.showWarningMessage("Please open some folder/project before starting wallaby.js.")}},{key:"_updateConfigurationFromSettings",value:function(){try{var e=g.workspace.getConfiguration();if(e){this._suppressExpirationNotifications=e.get("wallaby.suppressExpirationNotifications",!1),this._failingTestsOutput&&this._failingTestsOutput.setContentLimit(e.get("wallaby.outputContentSize",0));var t=e.get("wallaby.node","");t?process.env.WALLABY_NODE=t:delete process.env.WALLABY_NODE}}catch(e){}}},{key:"stop",value:function(){var e=this._session;delete this._started,delete this._starting,delete this._session,delete this._stats,e&&(e.disposables&&e.disposables.dispose(),e.stop(),delete e.filesToTrack,delete e.openedDocuments,delete e.disposables,this.emit("stopped"),this._update&&(this._onUpdate(this._update),delete this._update),this._consoleOutputChannel.appendLine(r.markupText("message","[Info]")+" Wallaby.js stopped"),this._valueExplorer.reset())}},{key:"_updateAvailable",value:function(e){this._started?this._update=e:this._onUpdate(e)}},{key:"_onUpdate",value:function(e){var t=this;this._updating=!0,e(function(){t._updating=!1,t._onUpdated&&(t._onUpdated(),delete t._onUpdated)})}},{key:"toggleUncovered",value:function(){var e=y.activeTextEditor;if(e){var t=!!e._wallabyUncoveredDisplayed;this._destroyUncoveredDecorations(e),t||this._showUncovered(e)}}},{key:"_destroyUncoveredDecorations",value:function(e){e&&(e.setDecorations(this._uncoveredRegionDecorationType,[]),delete e._wallabyUncoveredDisplayed)}},{key:"showLicense",value:function(){var p=this,h="";try{h=m.readFileSync(p._lkp).toString()}catch(e){}y.showInputBox({value:100<h.length?h:"",prompt:"Enter your wallaby.js license key"}).then(function(e){if(!_.isUndefined(e)){var t=h,n=e||"",a=!!p._parseLicenseKey(t),i=p._parseLicenseKey(n),o=!!i,s=!1;if(o||!n&&a)try{if(m.writeFileSync(p._lkp,n),i.isBundle){var r=f.join(v.homedir(),".quokka"),l=f.join(r,".qlc");m.existsSync(r)||m.mkdirSync(r),m.writeFileSync(l,n);var c=f.join(r,"config.json"),u={};try{var d=m.readFileSync(c).toString();u=JSON.parse(d)}catch(e){}u.pro=!0,m.writeFileSync(c,JSON.stringify(u)),g.commands.executeCommand("quokka.switchToPro").catch(function(e){})}s=o}catch(e){y.showErrorMessage("Unable to save license key: "+e.message),s=!1}else y.showWarningMessage("The entered license key is not a valid wallaby.js license key");s&&(y.showInformationMessage("Wallaby.js is licensed to: "+i.licensee+". Free upgrades until: "+i.expiration),p.stop(),p._state.licenseChanged())}})}},{key:"_parseLicenseKey",value:function(e){if(_.isString(e))try{var t=this._utils.parseKey(e);if(t.licenseeName&&t.expirationDateString&&(~t.licensedProduct.indexOf("(Freedom)")||~t.licensedProduct.indexOf("(VS Code)")))return{licensee:t.licenseeName,isBundle:0===t.licensedProduct.indexOf("Wallaby.js + Quokka.js"),expiration:t.expirationDateStringFormatted||t.expirationDateString}}catch(e){return}}},{key:"_showUncovered",value:function(t,e){var n=this;if(this._session){var a=t&&this._getDocumentFilePath(t.document);a&&this._session.openedDocuments[a]&&this._session.requestUncoveredRegions({file:a,line:e},function(e){return n._highlightUncovered(t,e.ranges)})}}},{key:"_highlightUncovered",value:function(e,t){e._wallabyUncoveredDisplayed=!0,e.setDecorations(this._uncoveredRegionDecorationType,_.map(t,function(e){return new g.Range(e[0]-1,e[1],e[2]-1,e[3])}))}},{key:"_jumpTo",value:function(e){var t=this;if(this._session){var n=y.activeTextEditor,a=n&&this._getDocumentFilePath(n.document),i=l._activeLine();this._session.requestLocation({file:a,line:i,type:e},function(e){return t._navigate(e.file,e.loc)})}}},{key:"_runTests",value:function(e,t){if(this._session){var n=void 0,a=void 0;if(t&&(n=_.isNumber(t)?t:(a=t.file,t.loc&&parseInt((t.loc+"").split(":")[0],10))),!a){var i=y.activeTextEditor;a=i&&this._getDocumentFilePath(i.document)}n||(n="line"===e&&l._activeLine()),this._session.runTests({file:"project"!==e&&a,line:n})}}},{key:"_execute",value:function(e){if(e&&e.command)return"function"==typeof e.command?e.command(e):~e.command.indexOf("wallaby.")?g.commands.executeCommand(e.command):this[e.command]()}},{key:"_getDocumentFilePath",value:function(e){return e.uri&&e.uri.fsPath&&this._relativeNormalizedFilePath(e.uri.fsPath)}},{key:"_observeDocuments",value:function(t){var n=this;t.isDisposed()||(t.disposables.add(u.onDidChangeTextDocument(function(e){return n._processDocumentContentChange(t,e.document,e.contentChanges)})),this._processOpenedEditors(t),t.disposables.add(y.onDidChangeActiveTextEditor(function(e){e&&(t.activeEditor===e&&(t.filesWithSameEditorReActivated||(t.filesWithSameEditorReActivated=Object.create(null)),t.filesWithSameEditorReActivated[n._getDocumentFilePath(e.document)]=!0),t.activeEditor=e),n._processOpenedEditors(t),n._displayStatusForActiveEditor(t)})),t.disposables.add(function(){delete t.activeEditor}),t.disposables.add(y.onDidChangeTextEditorSelection(function(){return n._displayStatusForActiveEditor(t)})))}},{key:"_displayStatusForActiveEditor",value:function(e){var t=this;if(e.isDisposed())return t._updateStatusExtension();var n=y.activeTextEditor;if(!n)return t._updateStatusExtension();var a=t._getDocumentFilePath(n.document);if(a){var i=e.openedDocuments[a];if(!i)return t._updateStatusExtension();var o="";i.coverage&&(o+=i.coverage);var s=l._activeLine();if(!s)return t._updateStatusExtension(o);var r=i.messagesByLine[s];if(r&&(o=r),!o)return t._updateStatusExtension();t._updateStatusExtension(o)}}},{key:"_processOpenedEditors",value:function(l){var i=this;if(!l.isDisposed()){var o=_.reduce(y.visibleTextEditors,function(e,t){if(t){var n=i._getDocumentFilePath(t.document);if(n&&l.filesToTrack[n]){var a=e[n];a||(a=e[n]=Object.create(null)),a[t._id]=!0}}return e},{});_.each(o,function(e,t){var n=_.keys(e).length,a=l.openedDocuments[t],i=n;if(a?0!==(i=n-a.editorCount)&&(a.editorCount=n):a=l.openedDocuments[t]={changes:[],path:t,editorCount:i},0!==i)for(var o=0<i?function(){return l.fileOpenedInEditor(t)}:function(){return l.fileClosedInEditor(t)},s=0,r=Math.abs(i);s<r;s++)o();else(!_.isEqual(a.editors,e)||l.filesWithSameEditorReActivated&&l.filesWithSameEditorReActivated[t])&&(l.fileClosedInEditor(t),l.fileOpenedInEditor(t));a.editors=e}),_.each(l.openedDocuments,function(e,t){if(!o[t]){for(var n=0,a=e.editorCount;n<a;n++)l.fileClosedInEditor(t);delete l.openedDocuments[t]}}),delete l.filesWithSameEditorReActivated}}},{key:"_processDocumentContentChange",value:function(e,t,n){if(!(e.isDisposed()||t&&t.uri&&t.uri.scheme&&"file"!==t.uri.scheme)){var a=this._getDocumentFilePath(t),i=e.openedDocuments[a];i&&(i.changes=i.changes.concat(n),this._hideMessagesForChangedRanges(i.changes),this._onceDocumentStopsChanging(e,i,t))}}},{key:"_onceDocumentStopsChanging",value:function(e,t,n){var a=this;!e.isDisposed()&&t.changes.length&&(clearTimeout(a._statusUpdateTimeout),a._statusUpdateTimeout=setTimeout(function(){return a._updateStatus("progress")},300),e.fileChangedInEditor(t.path,n.getText(),{start:_.chain(t.changes).map(function(e){return e.range.start.line}).min().value()+1,end:_.chain(t.changes).map(function(e){return e.range.end.line}).max().value()+1}),t.changes=[],this._destroyUncoveredDecorations(y.activeTextEditor))}},{key:"_updateStatus",value:function(e){clearTimeout(this._statusUpdateTimeout),e||(e=_.isString(this._stats)?"failing":this._stats?this._stats.failingNumber||this._stats.errors.length?"failing":"passing":void 0),e&&("progress"===e?this._statusBar.displayProgress():(this._statusBar.stopProgress(),_.isString(this._stats)?this._statusBar.setMainText("✗                "):this._statusBar.setMainText("✗ "+_.pad(this._stats.failingNumber||0,3," ","right")+" ✔ "+_.pad(this._stats.totalNumber-this._stats.failingNumber||0,5," ","right")),this._statusBar.updateText()),this._statusBar.show())}},{key:"_updateStatusExtension",value:function(e){this._statusBar.setExtensionText(e||void 0),this._statusBar.updateText()}},{key:"_continueTrial",value:function(){this._session&&this._session.continueTrial()}},{key:"_openPurchasePage",value:function(){try{n("openurl").open("https://wallabyjs.com/purchase")}catch(e){}}},{key:"_removeStatus",value:function(){this._statusBar.hide()}},{key:"_updateDocuments",value:function(a,s){if(!a.isDisposed()){var r=this;_.each(y.visibleTextEditors,function(n){var e=r._getDocumentFilePath(n.document),i=a.openedDocuments[e]||{};i.messagesByLine=Object.create(null),delete i.coverage;var t=s[e];if(t&&t.lines){t.coverage&&_.isNumber(t.coverage.value)&&(i.coverage=t.coverage.value+"%");var o={1:[],2:[],3:[],4:[],5:[]};_.each(t.lines,function(e){var t={range:new g.Range(e.num-1,0,e.num-1,1e3)},n=e.err||e.log,a=e.longLog||n;a&&(t.hoverMessage=g.MarkdownString?new g.MarkdownString("```\n"+a+"\n```"):a),o[e.state].push(t),n&&(i.messagesByLine[e.num]=n,r._hideAfterContentDecorationType&&(t.renderOptions={after:{contentText:"  "+l._escapeInlineMessage(n)}}))}),_.each(o,function(e,t){return n.setDecorations(r._coverageDecorationTypes[t],e)}),r._scheduleHiddenMessagesDisplay()}})}}},{key:"_hideMessagesForChangedRanges",value:function(e){this._hideAfterContentDecorationType&&(clearTimeout(this._displayHiddenMessagesTimeout),this._messagesHiddenAt=+new Date,y.activeTextEditor.setDecorations(this._hideAfterContentDecorationType,e.map(function(e){return{range:new g.Range(e.range.start.line,0,e.range.end.line,1e3)}})))}},{key:"_scheduleHiddenMessagesDisplay",value:function(){if(this._hideAfterContentDecorationType){var t=this;clearTimeout(this._displayHiddenMessagesTimeout);var e=this._messagesHiddenAt?+new Date-this._messagesHiddenAt:400;this._displayHiddenMessagesTimeout=setTimeout(function(){try{_.each(y.visibleTextEditors,function(e){return e.setDecorations(t._hideAfterContentDecorationType,[])})}catch(e){}},Math.max(0,500-e))}}},{key:"_navigate",value:function(t,e){var n=this;if(t){var a=this._absoluteFilePath(t),i=void 0,o=void 0;_.isNumber(e)?i=e:_.isArray(e)?(i=e[0],o=e[1]):_.isString(e)&&(e=e.split(":"),i=e[0]&&parseInt(e[0],10),o=e[1]&&parseInt(e[1],10)),_.isNumber(i)?i-=1:i=0,_.isNumber(o)||(o=0),u.openTextDocument(a).then(function(e){return y.showTextDocument(e,(_.find(y.visibleTextEditors,function(e){return e&&e.document&&n._getDocumentFilePath(e.document)===t})||{}).viewColumn)}).then(function(e){var t=new g.Position(i,o);e.revealRange(new g.Range(t,t)),e.selection=new g.Selection(t,t)})}}},{key:"_relativeConfigPath",value:function(){return this._configPath()&&f.relative(this._activeProjectRoot(),this._configPath())}},{key:"_absoluteFilePath",value:function(e){return this._configFolderPath()&&f.resolve(this._configFolderPath(),e)}},{key:"_relativeNormalizedFilePath",value:function(e,t){return(t||this._configFolderPath())&&this._utils.normalizePath(f.relative(t||this._configFolderPath(),e))}},{key:"_configByConvention",value:function(){var t=this;if(this._activeProjectRoot())return _.chain(["wallaby.js","wallaby.conf.js",".wallaby.js",".wallaby.conf.js","wallaby.json",".wallaby.json"]).map(function(e){return f.join(t._activeProjectRoot(),e)}).find(function(e){return m.existsSync(e)}).value()}}],[{key:"_checkConfigurationSettings",value:function(){try{var e=g.workspace.getConfiguration();e&&!e.get("editor.glyphMargin",!0)&&y.showWarningMessage("Wallaby.js will not display coverage indicators because the `editor.glyphMargin` setting is set to `false`.")}catch(e){}}},{key:"_activeLine",value:function(){var e=y.activeTextEditor;return e&&e.selection&&e.selection.active&&e.selection.active.line+1}},{key:"_notifyHowToSelectConfig",value:function(e){return y.showWarningMessage("Please select wallaby.js configuration file.",{title:"Select Wallaby.js Config File",command:function(){return e.selectConfigFile()}}).then(e._executeCommand)}},{key:"_escapeInlineMessage",value:function(e){return l._cssEscape(e).replace(/'/g,'"')}},{key:"_hash",value:function(e){return i.createHash("md5").update(e).digest("hex").substr(0,16)}},{key:"_outputTestResults",value:function(e,t,n){var a=void 0,i=e.lines();e.build(t);var o=e.lines();if(!(a=n||o.length!==i.length))for(var s=0,r=o.length;s<r;s++)if(e.areDifferent(o[s],i[s])){a=!0;break}a&&e.render()}},{key:"_cssEscape",value:function(e){for(var t,n=String(e),a=n.length,i=-1,o="",s=n.charCodeAt(0);++i<a;)1<=(t=n.charCodeAt(i))&&t<=31||127==t||0==i&&48<=t&&t<=57||1==i&&48<=t&&t<=57&&45==s?o+="\\"+t.toString(16)+" ":o+=128<=t||45==t||95==t||48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122?n.charAt(i):"\\"+n.charAt(i);return o}}]),l}();e.exports=l},{"./compositeDisposable":3,"./screenshotContentProvider":5,"./testsOutputBuilder":6,"./valueExplorer":7,crypto:void 0,"fs-extra":void 0,openurl:void 0,os:void 0,path:void 0,vscode:void 0}],5:[function(e,t,n){"use strict";var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i=e("vscode"),o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._onDidChange=new i.EventEmitter,this._screenshotUriResolver=e,this._screenShotUri=i.Uri.parse("wallaby-screenshot://authority/wallaby-screenshot"),this._panel=void 0}return a(t,[{key:"display",value:function(){var e=this,t=function(){try{i.commands.executeCommand("vscode.previewHtml",i.Uri.parse("wallaby-screenshot://authority/wallaby-screenshot"),i.ViewColumn.Two)}catch(e){}};if(!this._panel)try{if(!i.window.createWebviewPanel)return void t();this._panel=i.window.createWebviewPanel("wallabyJsScreenshot","Wallaby Last Screenshot",i.ViewColumn.Two,{})}catch(e){return void t()}this._panel.onDidDispose(function(){e._panel=void 0}),this.updateDisplay()}},{key:"updateDisplay",value:function(){this._panel.webview.html=this.provideTextDocumentContent()}},{key:"provideTextDocumentContent",value:function(){var e=void 0;try{e=this._screenshotUriResolver()}catch(e){return""}return'<!DOCTYPE html>\n            <html>\n            <head>\n            </head>\n            <body>\n                <img src="'+e.toString()+"?ts="+ +new Date+'" />\n            </body>\n            </html>'}},{key:"update",value:function(){this._onDidChange.fire(this._screenShotUri),this._panel&&this.updateDisplay()}},{key:"onDidChange",get:function(){return this._onDidChange.event}}]),t}();t.exports=o},{vscode:void 0}],6:[function(e,t,n){"use strict";var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var h=e("vscode"),f={text:"",link:Array(2).join("​"),error:Array(3).join("​"),duration:Array(4).join("​"),suite:Array(5).join("​"),message:Array(6).join("​"),diffIns:Array(2).join("‌⁠"),diffDel:Array(2).join("‍"),tmpDiffInsOpen:"wsDiffIns",tmpDiffInsClose:"weDiffIns",tmpDiffDelOpen:"wsDiffDel",tmpDiffDelClose:"weDiffDel",linkNoStack:Array(2).join("​")},c="All tests covering the line of code:",u=" failing test",i=function(){function p(e,t,n,a,i,o,s,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var l=this;this._lines=[],this._links=[],this._lineAndColumnLinks=i,this._contentLimit=204800,this._channel=e,this._absolutePathResolver=t,this._failingTestsOutput=o,this._dmp=n,this.render=_.debounce(_.bind(this.render,this),300),this._timeEnd=" ms]​",this._sideBySideDiffSupported=r,h.languages.registerDocumentLinkProvider&&a.add(h.languages.registerDocumentLinkProvider(s,{provideDocumentLinks:function(e){var t=e.lineAt(0);return t&&t.text&&(l._failingTestsOutput&&~t.text.indexOf(u)||!l._failingTestsOutput&&~t.text.indexOf(c))?l._links:[]}}))}return a(p,[{key:"build",value:function(e){var t=this;t._lines=[],t._links=[],_.isString(e)?t._appendLine(this._failingTestsOutput?"error":"message",0,e,this._failingTestsOutput&&"Error"):_.isObject(e)&&(this._failingTestsOutput?t._appendLine("message",0,e.failingNumber+u+(1===e.failingNumber?", ":"s, ")+(e.totalNumber-e.failingNumber)+" passing"+(e.additionalHeaderMessage?" "+e.additionalHeaderMessage:"")+(e.errors&&e.errors.length?"\n":"")):t._appendLine("message",0,c,"Info"),_.each(e.errors,function(e){return t._outputError(e.message,e.stack,e.expected,e.actual,e.snapshot)}),_.each(e.tests,function(e){return t._outputTest(e)}))}},{key:"lines",value:function(){return this._lines}},{key:"render",value:function(){this._channel.clear();for(var e="",t=0,n=this._lines.length;t<n;t++){if((e+=this._lines[t]+"\n").length>this._contentLimit){e+="\n--- output truncated to "+this._contentLimit+' bytes (use the "wallaby.outputContentSize" user setting to change the bytes limit) ---\n';break}}this._channel.append(e)}},{key:"show",value:function(){this._channel.show(!0)}},{key:"areDifferent",value:function(e,t){return!(e===t||~e.indexOf(this._timeEnd)&&~t.indexOf(this._timeEnd)&&e.substr(0,e.lastIndexOf("["))===t.substr(0,t.lastIndexOf("[")))}},{key:"setContentLimit",value:function(e){e&&(this._contentLimit=e)}},{key:"createDiffMarkdown",value:function(e,t,n,a){var i=[];return this._sideBySideDiffOutputLink(e,t,n,a,0,i),i.push("```wallaby-output"),this._diffOutput(e,t,0,i),i.push("```"),i.join("\n")}},{key:"_sideBySideDiffOutputLink",value:function(e,t,n,a,i,o){var s,r,l,c,u,d=this;e=e||"",t=t||"",i=i||0,this._sideBySideDiffSupported&&(s="\nShow side-by-side diff",r=h.Uri.parse("command:_workbench.diff?"+JSON.stringify([p.diffCommandArguments(e,t)])),l="Update snapshot",c=h.Uri.parse("command:wallaby.updateTestSnapshots?"+JSON.stringify(a)),u=n&&a,o?h.MarkdownString&&(s="[Show side-by-side diff]("+r+")",u&&(s+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;["+l+"]("+c+")"),d._appendLine("linkNoStack",i,s,void 0,void 0,void 0,o)):d._appendLine("linkNoStack",i,s+(u?"  "+l:""),void 0,void 0,function(e,t){var n=d._lines.length;d._links.push({range:new h.Range(n,t,n,t+s.length-1),target:r}),u&&d._links.push({range:new h.Range(n,t+s.length+1,n,t+s.length+l.length+1),target:c})}))}},{key:"_diffOutput",value:function(e,t,n,a){e=e||"",t=t||"",n=n||0;var i=(a?"":"\n")+this._dmp[this._dmp.diff_prettyCompactHtml?"diff_prettyCompactHtml":"diff_prettyHtml"](this._dmp.diff_wordMode(e,t)).replace(/&para;<br>/g,"\n").replace(/<br>/g,"\n").replace(/<span class="dots">\.\.\.<\/span>/g,f.duration+"..."+f.duration).replace(/<\/?span[^>]*>/g,"").replace(/<ins[^>]*>/g,f.tmpDiffInsOpen).replace(/<del[^>]*>/g,f.tmpDiffDelOpen).replace(/<\/ins[^>]*>/g,f.tmpDiffInsClose).replace(/<\/del[^>]*>/g,f.tmpDiffDelClose).replace(/style="background:#e6ffe6;"/g,"").replace(/style="background:#ffe6e6;"/g,"").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&gt;/g,">"),o=0,s=0;this._appendLine("none",n,i,void 0,void 0,function(e){if(!e)return e;0<o&&(e=f.diffIns+e),0<s&&(e=f.diffDel+e);var t=(e.match(new RegExp(f.tmpDiffInsOpen,"g"))||[]).length,n=(e.match(new RegExp(f.tmpDiffInsClose,"g"))||[]).length;o+=t-n;var a=(e.match(new RegExp(f.tmpDiffDelOpen,"g"))||[]).length,i=(e.match(new RegExp(f.tmpDiffDelClose,"g"))||[]).length;return 0<o&&(e+=f.diffIns),0<(s+=a-i)&&(e+=f.diffDel),e.replace(new RegExp(f.tmpDiffInsOpen,"g"),f.diffIns).replace(new RegExp(f.tmpDiffInsClose,"g"),f.diffIns).replace(new RegExp(f.tmpDiffDelOpen,"g"),f.diffDel).replace(new RegExp(f.tmpDiffDelClose,"g"),f.diffDel)},a)}},{key:"_outputError",value:function(e,t,n,a,i,o){var s=this;o=o||0,this._dmp&&(n||a)&&(this._sideBySideDiffOutputLink(n,a,i,t&&t.length&&t[0],o),this._diffOutput(n,a,o)),this._appendLine("error",o,e),_.each(t,function(e){return s._outputLink(e,o+1)})}},{key:"_outputTest",value:function(a){var i=this,e=a.path&&_.last(a.path)||"",t=_.initial(a.path||[]).join(" "),o=(""+f.suite+t+" "+e+f.suite).replace(/\r?\n|\r/g," ").replace(/\s\s+/g," "),n=_.isNumber(a.time)?"["+a.time+this._timeEnd:"";i._appendLine("text",1,""),i._appendLine("text",1,o+" "+f.duration+n+f.duration,void 0,void 0,function(e,t){var n=i._lines.length;i._links.push({range:new h.Range(n,t,n,t+o.length),target:h.Uri.parse(h.Uri.file(i._absolutePathResolver(a.file)).toString()+i._location(a.loc))})}),_.each(a.errors,function(e){return i._outputError("\n"+e.message,e.stack,e.expected,e.actual,e.snapshot,2)}),a.messages&&a.messages.length&&(i._appendLine("message",2,"\nFrom console:"),_.each(a.messages,function(e){return i._appendLine("message",3,"\n"+e.text),i._outputLink(e,3)}))}},{key:"_outputLink",value:function(a,e){var i=this;if(a.file){var o=a.file+":"+a.loc;this._appendLine("link",e,o,void 0,a.context,function(e,t){var n=i._lines.length;i._links.push({range:new h.Range(n,t,n,t+o.length),target:h.Uri.parse(h.Uri.file(i._absolutePathResolver(a.file)).toString()+i._location(a.loc))})})}}},{key:"_location",value:function(e){var t=void 0,n=void 0;return _.isNumber(e)?t=e:_.isArray(e)?(t=e[0],n=e[1]):_.isString(e)&&(t=(e=e.split(":"))[0]&&parseInt(e[0],10),n=e[1]&&parseInt(e[1],10)),"#"+(this._lineAndColumnLinks&&_.isNumber(n)?t+","+(n+1):t)}},{key:"_appendLine",value:function(i,o,e,s,r,l,c){var u=this,t=e.split(/\r\n|\r|\n/);r&&r.replace&&(r=r.replace(/\r\n\s*/g," ").replace(/\n\s*/g," "));var d=f[i]||"";_.each(t,function(e){var t=(s?"["+s+"] ":"")+_.pad("",2*o,"   ")+("link"===i?"at "+(r?r+" ":""):"")+d,n=t+e+d;if(l){var a=l(n,t.length);a&&(n=a)}(c||u._lines).push(n)})}}],[{key:"markupText",value:function(e,t){var n=f[e]||"";return""+n+t+n}},{key:"diffCommandArguments",value:function(e,t){return[h.Uri.parse("wallaby-diff:data?"+new Buffer(e).toString("base64")),h.Uri.parse("wallaby-diff:data?"+new Buffer(t).toString("base64")),"Expected vs Actual"]}}]),p}();t.exports=i},{vscode:void 0}],7:[function(e,t,n){"use strict";var s=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=e("vscode"),c=global._,a=function(){function o(e){r(this,o),this._treeDataProvider=new d,this._treeDataProvider._rootNodes={},this._context=e,l.window.registerTreeDataProvider&&l.window.registerTreeDataProvider("wallabyValueExplorer",this._treeDataProvider)}return s(o,[{key:"reset",value:function(e,t){this._sessionContext&&this._sessionContext.runPendingUpdates(),this._treeDataProvider._rootNodes={},this._treeDataProvider.refresh(),e&&t&&(this._sessionContext=new i(this._context,e,t))}},{key:"update",value:function(e){var n,i=this;e.specificFile||(n=e.files||{},c.each(i._treeDataProvider._rootNodes,function(e,t){n[t]||(delete i._treeDataProvider._rootNodes[t],i._sessionContext.removeFileFromExpressionsToEvaluate(t))})),c.each(e.files,function(a,e){var t,n;(!i._treeDataProvider._rootNodes[e]||a.messages&&a.messages.length)&&(t=new u(i._sessionContext,{id:e,name:a.name,queryPath:e.toString(),label:{name:a.name},fileNode:!0,disallowToCopyPath:!0,disallowToCopyData:!0,expandable:!0}),n=!1,t._children=c.chain(a.messages).map(function(e){var t=(e.valueBag||{}).data;if(t){t.name||(t.name=o.removeSpacesTabsLineBreaks(e.context));var n=(e.loc.toString()||"").split(":")[0];return n&&(t.name="line "+n+(t.name?": "+t.name:"")),t.label=t.label||{},t.label.name=t.name,t.context=e.context,t.rootValueNode=!0,t.expressionLocation={file:a.name,loc:e.loc,line:parseInt(n,10)},t}}).filter(function(e){return!!e}).sortBy(function(e){return e.expressionLocation.line}).map(function(e){return n=n||e.autoExpand,new u(i._sessionContext,e,t,e.autoExpand)}).value(),t._children.length?n&&(t.collapsibleState=2):delete t._children,i._treeDataProvider._rootNodes[e]=t)}),this._sessionContext.runPendingUpdates(),this._treeDataProvider.refresh()}}],[{key:"removeSpacesTabsLineBreaks",value:function(e){return e&&e.replace(/\s/g,"")}}]),o}(),i=function(){function a(e,t,n){r(this,a),this._expressionsToEvaluate={},this._onUpdate=[],this._extensionContext=e,this._session=n,this._controller=t,this.id=n.id}return s(a,[{key:"asAbsolutePath",value:function(e){return this._extensionContext.asAbsolutePath(e)}},{key:"isPathRequested",value:function(e,t){if("string"!=typeof e){var n=this._expressionsToEvaluate,a=c.every(e,function(e){return!!n[e]&&(n=n[e],!0)});return a&&t?JSON.stringify(t)===JSON.stringify(n):a}}},{key:"requestNodes",value:function(e,t){var n=e._queryPath;if("string"!=typeof n){var a=this._expressionsToEvaluate;c.each(n,function(e){a[e]=a[e]||{},a=a[e]}),t&&(a.props=t.props,a.strLength=t.strLength,a.ranges=t.ranges),this._session.isDisposed()||(this._session.expressionsToEvaluate(this._expressionsToEvaluate),this._controller._runTests("line",e.getRootExpressionLocation()))}else!this._session.isDisposed()&&this._session.getFileMessages(n)}},{key:"scheduleOnUpdate",value:function(e){this._onUpdate.push(e)}},{key:"copyToClipboard",value:function(e){!this._session.isDisposed()&&this._session.copyToClipboard(e)}},{key:"cancelPendingUpdates",value:function(){this._onUpdate=[]}},{key:"runPendingUpdates",value:function(){c.each(this._onUpdate,function(e){try{return e()}catch(e){}}),this._onUpdate.length=0}},{key:"removeFileFromExpressionsToEvaluate",value:function(t){var n=this;c.each(c.keys(this._expressionsToEvaluate),function(e){parseInt(e.split(",")[0],10)&&delete n._expressionsToEvaluate[t]})}}]),a}(),u=function(){function i(e,t,n,a){r(this,i),this._context=e,this._parent=n,this._data=t,this.label=this._createLabel(),this._queryPath=t.queryPath,this.id=(a?"A":"")+t.id,this.iconPath=this._getIconPath(),this.contextValue="",t.disallowToCopyPath||(this.contextValue+="WallabyAllowToCopyPath"),t.disallowToCopyData||(this.contextValue+="WallabyAllowToCopyData"),t.rootValueNode&&(this.contextValue+="WallabyAllowToGoToSource"),this._autoExpand=a&&!this._data.cappedProps&&!this._data.capped&&!this._data.loadActionNode&&!this._data.rangeNode&&"string"!==this._data.type&&!this._data.getter&&!this._data.setter,this.collapsibleState=t.expandable?this._autoExpand?2:1:0,t.rangeNode&&(this._parentArray=n._parentArray||n,this._queryPath=this._parentArray._queryPath),t.fileNode&&(this.iconPath=l.ThemeIcon.File,this.resourceUri=l.Uri.file(t.name))}return s(i,[{key:"getChildren",value:function(){var n=this;if(this._children)return this._children;if("string"===this._data.type)return this._getChildren({strLength:Number.MAX_VALUE});if(this._data.loadActionNode)return this._getChildren({props:Number.MAX_VALUE});var e=(this._data.props||[]).map(function(e){return new i(n._context,e,n,n._autoExpand)});return e.length?Promise.resolve(e):this._data.rangeNode?this._getChildren({ranges:{props:JSON.parse(JSON.stringify(this._parentArray._data.props,function(e,t){return t.props&&(!t.props.length&&t===n._data||t.props.length&&!t.props[0].rangeNode)&&(t.props=!0),t})),length:this._parentArray._data.length}}):this._getChildren()}},{key:"copyExpressionPath",value:function(){(this._data||{}).expressionPath&&this._context.copyToClipboard(this._data.expressionPath.join(""))}},{key:"copyExpressionData",value:function(){this._data&&this._context.copyToClipboard(this._data)}},{key:"data",value:function(){return this._data}},{key:"getRootExpressionLocation",value:function(){for(var e=this;e&&!e._data.rootValueNode;)e=e._parent;if(e)return e._data.expressionLocation}},{key:"_getChildren",value:function(e){var n=this;return this._context.isPathRequested(this._queryPath,e)?[]:(this._context.requestNodes(this,e),new Promise(function(e,t){n._context.scheduleOnUpdate(e)}))}},{key:"_getIconPath",value:function(){if(this._data.getter)return this._context.asAbsolutePath("images/getter.svg");if(this._data.functionsNode)return this._context.asAbsolutePath("images/function.svg");if(this._data.loadActionNode)return this._context.asAbsolutePath("images/more.svg");if(this._data.error)return this._context.asAbsolutePath("images/error.svg");if(this._data.rangeNode)return this._context.asAbsolutePath("images/range.svg");if(!this._data.fileNode){if(this._data.type)switch(this._data.type.toLowerCase()){case"string":if(this._data.capped)return this._context.asAbsolutePath("images/cappedString.svg");case"object":case"array":case"number":case"function":case"boolean":case"date":case"regexp":case"symbol":case"null":case"undefined":return this._context.asAbsolutePath("images/"+this._data.type.toLowerCase()+".svg")}return this._context.asAbsolutePath("images/object.svg")}}},{key:"_createLabel",value:function(){var e=this._data.label,t="";return e.name&&(t+=e.name),e.type&&(t+=": "+e.type+" "),e.value&&(t+=(e.type?"":": ")+e.value),t}}]),i}(),d=function(){function e(){r(this,e),this._onDidChangeTreeData=new l.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}return s(e,[{key:"refresh",value:function(){this._onDidChangeTreeData.fire()}},{key:"getTreeItem",value:function(e){return e}},{key:"getChildren",value:function(e){return e?e.getChildren():Promise.resolve(c.chain(this._rootNodes).values().sortBy(function(e){return e._data.name}).value())}}]),e}();t.exports=a},{vscode:void 0}],8:[function(e,t,n){t.exports={name:"wallaby-vscode",displayName:"Wallaby.js",description:"Integrated Continuous Testing Tool for JavaScript.",version:"1.0.106",author:"Wallaby.js",homepage:"http://wallabyjs.com",bugs:{url:"https://github.com/wallabyjs/public/issues"},publisher:"WallabyJs",engines:{vscode:"0.10.x"},keywords:["testing","runner","unittest","JavaScript","TypeScript"],categories:["Other"],activationEvents:["*"],main:"./index",icon:"images/logo.png",galleryBanner:{color:"#ffffff",theme:"light"},contributes:{viewsContainers:{activitybar:[{id:"wallaby",title:"Value Explorer",icon:"images/logo.svg"}]},views:{wallaby:[{id:"wallabyValueExplorer",name:"Wallaby",when:"wallaby.reportedAtLeastOnceLogValue"}]},commands:[{command:"wallaby.start",title:"Wallaby.js: Start"},{command:"wallaby.stop",title:"Wallaby.js: Stop"},{command:"wallaby.showCommandPalette",title:"Wallaby.js: Show Commands"},{command:"wallaby.jumpToFailingTest",title:"Wallaby.js: Jump to Failing Test"},{command:"wallaby.jumpToErrorSource",title:"Wallaby.js: Jump to Error Source"},{command:"wallaby.toggleUncovered",title:"Wallaby.js: Toggle Uncovered Code Regions"},{command:"wallaby.showLineTests",title:"Wallaby.js: Show Line Tests"},{command:"wallaby.showFailingTests",title:"Wallaby.js: Show Failing Tests"},{command:"wallaby.showSideBySideDiff",title:"Wallaby.js: Show Side-by-Side Diff"},{command:"wallaby.runProjectTests",title:"Wallaby.js: Run Project Tests"},{command:"wallaby.runFileTests",title:"Wallaby.js: Run File Tests"},{command:"wallaby.runLineTests",title:"Wallaby.js: Run Line Tests"},{command:"wallaby.updateProjectSnapshots",title:"Wallaby.js: Update Project Snapshots"},{command:"wallaby.updateFileSnapshots",title:"Wallaby.js: Update File Snapshots"},{command:"wallaby.updateTestSnapshots",title:"Wallaby.js: Update Test Snapshots"},{command:"wallaby.showValue",title:"Wallaby.js: Show Value"},{command:"wallaby.openWallabyApp",title:"Wallaby.js: Open Wallaby App"},{command:"wallaby.selectConfigFile",title:"Wallaby.js: Select Configuration File"},{command:"wallaby.showLastScreenshot",title:"Wallaby.js: Show Last Screenshot"},{command:"wallaby.showLicense",title:"Wallaby.js: Manage License Key"},{command:"wallaby.copyExpressionPath",title:"Copy Path",category:"Wallaby.js"},{command:"wallaby.copyExpressionData",title:"Copy Data",category:"Wallaby.js"},{command:"wallaby.goToExpressionSource",title:"Go to Source",category:"Wallaby.js"}],menus:{commandPalette:[{command:"wallaby.copyExpressionPath",when:"false"},{command:"wallaby.copyExpressionData",when:"false"},{command:"wallaby.goToExpressionSource",when:"false"}],"view/item/context":[{command:"wallaby.copyExpressionPath",when:"viewItem =~ /WallabyAllowToCopyPath/"},{command:"wallaby.copyExpressionData",when:"viewItem =~ /WallabyAllowToCopyData/"},{command:"wallaby.goToExpressionSource",when:"viewItem =~ /WallabyAllowToGoToSource/"}],"editor/context":[{when:"wallaby.started",command:"wallaby.showLineTests",group:"WallabyGroup@1"}]},keybindings:[{command:"wallaby.showCommandPalette",key:"ctrl+shift+=",mac:"cmd+shift+="},{command:"wallaby.start",key:"ctrl+shift+r r",mac:"cmd+shift+r r"},{command:"wallaby.stop",key:"ctrl+shift+r s",mac:"cmd+shift+r s"},{command:"wallaby.runProjectTests",key:"ctrl+shift+r p",mac:"cmd+shift+r p"},{command:"wallaby.showLastScreenshot",key:"ctrl+shift+r h",mac:"cmd+shift+r h"},{command:"wallaby.runLineTests",key:"ctrl+shift+r c",mac:"cmd+shift+r c",when:"editorTextFocus"},{command:"wallaby.runFileTests",key:"ctrl+shift+r f",mac:"cmd+shift+r f",when:"editorTextFocus"},{command:"wallaby.jumpToFailingTest",key:"ctrl+shift+r o",mac:"cmd+shift+r o",when:"editorTextFocus"},{command:"wallaby.jumpToErrorSource",key:"ctrl+shift+r p",mac:"cmd+shift+r p",when:"editorTextFocus"},{command:"wallaby.toggleUncovered",key:"ctrl+shift+r u",mac:"cmd+shift+r u",when:"editorTextFocus"},{command:"wallaby.showFailingTests",key:"ctrl+shift+r t",mac:"cmd+shift+r t"},{command:"wallaby.showLineTests",key:"ctrl+shift+r l",mac:"cmd+shift+r l",when:"editorTextFocus"},{command:"wallaby.showSideBySideDiff",key:"ctrl+shift+r d",mac:"cmd+shift+r d",when:"editorTextFocus"},{command:"wallaby.showValue",key:"ctrl+shift+r v",mac:"cmd+shift+r v",when:"editorTextFocus"}],languages:[{id:"wallaby-output",mimetypes:["text/x-code-output"]}],grammars:[{language:"wallaby-output",scopeName:"wallaby.output",path:"./wallaby-output.tmLanguage"}],configuration:{type:"object",title:"Wallaby configuration",properties:{"wallaby.useHttpForDownload":{description:"Use HTTP protocol to download wallaby updates",type:"boolean",default:!1},"wallaby.strictSSL":{description:"Use strict SSL to download wallaby updates",type:"boolean",default:!0},"wallaby.noAutomaticInstall":{description:"Stop automatic wallaby core updates",type:"boolean",default:!1},"wallaby.showUpdateNotifications":{description:"Show wallaby core update notifications",type:"boolean",default:!0},"wallaby.suppressExpirationNotifications":{description:"Stop wallaby expiring license update reminders",type:"boolean",default:!1},"wallaby.node":{description:"Path to node.js executable that is used to run wallaby core",type:"string",default:""},"wallaby.outputContentSize":{description:"Wallaby output content limit in bytes",type:"number",default:0},"wallaby.colors":{description:"Wallaby gutter indicators colors (requires a restart after change)",type:"object",default:{covered:"#62b455",errorPath:"#ffa0a0",errorSource:"#fe536a",notCovered:"#cccccc",partiallyCovered:"#d2a032"}}}}},devDependencies:{lodash:"*",grunt:"*","grunt-babel":"5.0.1","grunt-browserify":"*","grunt-bump":"0.0.16","grunt-contrib-clean":"*","grunt-contrib-compress":"^0.12.0","grunt-contrib-copy":"*","grunt-contrib-uglify":"*",vscode:"0.10.x"},dependencies:{"adm-zip-mit":"0.4.12","fs-extra":"0.26.2",lockfile:"1.0.3",openurl:"1.1.1",q:"1.4.1",request:"2.88.0","tar-stream":"1.3.1","unbzip2-stream":"1.0.8"},__metadata:{id:"6766254a-8e43-4ebc-9b89-e5be39cb5318",publisherDisplayName:"Wallaby.js",publisherId:"9e43bb4e-4318-4e59-b5c2-df1109a963dd"}}},{}]},{},[2]);